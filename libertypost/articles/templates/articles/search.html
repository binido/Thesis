{% extends "articles/main.html" %} 
{% block main_content %} 

<div class="card p-10 flex-col g-16 card-search">
    <form method="get">
        <div class="flex-row">
            <input type="text" name="query" placeholder="–ù–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é" value="{{ query }}" />
            <input type="submit" value="üîçÔ∏é" />
        </div>
        <select name="sort" class="filter" onchange="this.form.submit()">
            <option value="-created_at" {% if request.GET.sort == "-created_at" %}selected{% endif %}>–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
            <option value="created_at" {% if request.GET.sort == "created_at" %}selected{% endif %}>–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
        </select>
    </form>
        
</div>

{% for article in articles %}
<div class="card card-article card-padding">
    <div class="card-info flex-row">
        <a href="{{ article.author.get_absolute_url }}" class="user-info flex-row">
            <img src="{{ article.author.image.url|default:'https://placehold.co/32x32' }}" alt="" />
            <p>{{ article.author.username }}</p>
        </a>
        <p>{{ article.created_at|timesince }} –Ω–∞–∑–∞–¥</p>
    </div>
    <div class="card-header">
        <a href="{% url 'articles:article' article.id %}" class="article-title">
            <h2 class="shirt">{{ article.title }}</h2>
        </a>
        <div class="card-categories">
            {% for category in article.categories.all %}
            <a href="{% url 'articles:category' category.slug %}"
                >{{ category.name }}</a
            >
            {% endfor %}
        </div>
    </div>
    <div class="card-body">
        {% if article.image %}
        <img src="{{ article.image.url }}" alt="" />
        {% endif %}
        <div class="article article-shirt">
            {{ article.html_content|safe }}
        </div>
    </div>

    <div class="card-footer">
        <button class="read-button" type="button" onclick="document.location.href=`{% url 'articles:article' article.id %}`">–ß–∏—Ç–∞—Ç—å</button>
        <div class="interactive flex-row">
            <div class="interactive-item">
                <a href="{% url 'articles:article' article.id %}#comment" class="flex-row">
                    <i class="fa-solid fa-message"></i>
                    <p>{{ article.comment_count }}</p>
                </a>
            </div>
            <div
                class="interactive-item"
                onclick="copyLink(`{{ request.scheme }}://{{ request.get_host }}{% url 'articles:article' article.id %}`)"
            >
                <i class="fa-solid fa-share"></i>
            </div>
        </div>
    </div>
</div>
{% endfor %} 

{% endblock %}
